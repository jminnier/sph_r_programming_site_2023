---
title: "Part 5: Data summarizing, reshaping, and wrangling with multiple tables"
linktitle: "Part 5: Data summarizing, reshaping, and wrangling with multiple tables"
date: "2022-02-02"
class_date: "2022-02-02"
output:
  blogdown::html_page:
    toc: true
menu:
  class:
    parent: Class sessions
    weight: 5
type: docs
weight: 5
# pdf: 
# thumb: 
editor_options: 
  chunk_output_type: console
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#r-project-files">R Project files</a></li>
<li><a href="#class-video">Class Video</a></li>
<li><a href="#slides">Slides</a></li>
<li><a href="#another-useful-video">Another useful video</a></li>
<li><a href="#post-class">Post-Class</a></li>
<li><a href="#muddiest-points">Muddiest Points</a></li>
<li><a href="#clearest-points">Clearest points</a></li>
<li><a href="#messages-to-me">Messages to me</a></li>
</ul>
</div>

<div id="r-project-files" class="section level2">
<h2>R Project files</h2>
<p>Please download the part5 subfolder in <a href="https://www.dropbox.com/sh/q4z72523kl84ywp/AAASb1YIFRpxzrjOeq1FVcXua?dl=0">this folder link</a> Be sure to unzip if necessary. “Knit” the <code>code/part5.Rmd</code> file to install packages and make sure everything is working with data loading.</p>
</div>
<div id="class-video" class="section level2">
<h2>Class Video</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_V7cKw39Fzc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>View last year’s class and materials <a href="https://sph-r-programming.netlify.app/class/05-class/">here</a>.</p>
</div>
<div id="slides" class="section level2">
<h2>Slides</h2>
<p>During “Muddiest Parts” review, we will go over <a href="https://sph-r-programming-2022.netlify.app/slides/05-saving-objects-vs-summaries">these slides</a></p>
<iframe src="https://sph-r-programming-2022.netlify.app/slides/05-saving-objects-vs-summaries#1" width="672" height="400px" data-external="1">
</iframe>
</div>
<div id="another-useful-video" class="section level2">
<h2>Another useful video</h2>
<p><a href="https://youtu.be/4ZIFb1BoIB4">Dr. Kelly Bodwin’s Reshaping Data Video</a></p>
<p>For a short version, watch the <a href="https://youtu.be/4ZIFb1BoIB4?t=365">pivot_longer excerpt</a> about “working backwards” from a plot. Then watch the <a href="https://youtu.be/4ZIFb1BoIB4?t=620">pivot_wider excerpt</a></p>
</div>
<div id="post-class" class="section level2">
<h2>Post-Class</h2>
<p>Please fill out the following survey and we will discuss the results during the next lecture. All responses will be anonymous.</p>
<ul>
<li>Clearest Point: What was the most clear part of the lecture?</li>
<li>Muddiest Point: What was the most unclear part of the lecture to you?</li>
<li>Anything Else: Is there something you’d like me to know?</li>
</ul>
<p><a href="https://forms.gle/4tVx1mL7SzQx7MCu5" class="uri">https://forms.gle/4tVx1mL7SzQx7MCu5</a></p>
</div>
<div id="muddiest-points" class="section level2">
<h2>Muddiest Points</h2>
<blockquote>
<p>fct_other() and fct_collapse: I actually think I understand the point of each of these separately, but somehow using them together like in the example totally confused me. I’ll have to go look at it again later.</p>
</blockquote>
<blockquote>
<p>The data cleaning section where we used forcats since it was confusing as to how to use it.</p>
</blockquote>
<blockquote>
<p>when to use fct_collapse vs case when and when you would want to turn a character into a vector</p>
</blockquote>
<p>Thanks for this, I went through this too quickly it seems. First, I should say that the two ways of creating the <code>cigarettes10</code> categorical vector – using <code>case_when()</code> or using <code>forcats</code> factor function – are both equally good options. You can always turn a character vector into a factor after using case_when. I will show some benefits of a factor vector in part 6 and also when we talk about statistical modeling. Here is a visual explanation of what I was doing with <code>fct_other()</code> + <code>fct_collapse()</code>:</p>
<p><img src = "/img/cigarettes10_forcats.png"></p>
<blockquote>
<p>Also the challenge question to change the logical “ever_been_bullied” into a character vector with ifelse() … I have never used ifelse() and that made zero sense to me. Will have to play with it to understand.</p>
</blockquote>
<p>Good point, I showed this mainly because it’s another option (and one I default to using sometimes) but didn’t carefully go through it, sorry about that. You can always just use <code>case_when()</code>, but if you want to learn more about the base R function <code>ifelse()</code>, it is basically a simpler <code>case_when</code> with only one condition, and two possible values. The way we use it is like</p>
<p><code>ifelse(BOOLEAN_TEST_CONDITION, value_if_test_is_TRUE, value_if_test_is_FALSE)</code></p>
<p>For instance:</p>
<pre class="r"><code>library(tidyverse)

# simple test
1==2 # this is a boolean test</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code>ifelse(1==2, &quot;math is wrong&quot;, &quot;math is right&quot;)</code></pre>
<pre><code>## [1] &quot;math is right&quot;</code></pre>
<pre class="r"><code>ifelse(1==1, &quot;math is wrong&quot;, &quot;math is right&quot;)</code></pre>
<pre><code>## [1] &quot;math is wrong&quot;</code></pre>
<pre class="r"><code># ifelse() is vectorized
myvec &lt;- c(1,2,NA)

ifelse(is.na(myvec), &quot;missing&quot;, &quot;not missing&quot;)</code></pre>
<pre><code>## [1] &quot;not missing&quot; &quot;not missing&quot; &quot;missing&quot;</code></pre>
<pre class="r"><code>ifelse(myvec==2, &quot;two&quot;, &quot;not two&quot;) # NAs are preserved</code></pre>
<pre><code>## [1] &quot;not two&quot; &quot;two&quot;     NA</code></pre>
<pre class="r"><code># we can save the resulting vector
newvec &lt;- ifelse(myvec==2, &quot;two&quot;, &quot;not two&quot;) 
newvec</code></pre>
<pre><code>## [1] &quot;not two&quot; &quot;two&quot;     NA</code></pre>
<pre class="r"><code># we can use it in mutate as well
# make a small data set
mydata &lt;- head(mtcars[,1:4])
mydata</code></pre>
<pre><code>##                    mpg cyl disp  hp
## Mazda RX4         21.0   6  160 110
## Mazda RX4 Wag     21.0   6  160 110
## Datsun 710        22.8   4  108  93
## Hornet 4 Drive    21.4   6  258 110
## Hornet Sportabout 18.7   8  360 175
## Valiant           18.1   6  225 105</code></pre>
<pre class="r"><code>mydata %&gt;% mutate(
  cyl6 = ifelse(cyl==6, &quot;cyl is 6!!!&quot;, &quot;cyl is not 6&quot;)
)</code></pre>
<pre><code>##                    mpg cyl disp  hp         cyl6
## Mazda RX4         21.0   6  160 110  cyl is 6!!!
## Mazda RX4 Wag     21.0   6  160 110  cyl is 6!!!
## Datsun 710        22.8   4  108  93 cyl is not 6
## Hornet 4 Drive    21.4   6  258 110  cyl is 6!!!
## Hornet Sportabout 18.7   8  360 175 cyl is not 6
## Valiant           18.1   6  225 105  cyl is 6!!!</code></pre>
<blockquote>
<p>adorn_percentages: On the species/sex tabyl example, percentages were calculated across rows for sex. Is there a way to change percentages to calculate down columns for species?</p>
</blockquote>
<p>Yes!! When I talk more about tables, statistical modeling, etc I was planning to go more in depth with janitor tabyls. But it’s so useful I can’t help but keep showing you tabyl functions along the way. So here’s some more tips:</p>
<pre class="r"><code>library(janitor)
library(palmerpenguins)
library(gt)

# simple cross table with counts
penguins %&gt;% 
  tabyl(species, sex) </code></pre>
<pre><code>##    species female male NA_
##     Adelie     73   73   6
##  Chinstrap     34   34   0
##     Gentoo     58   61   5</code></pre>
<pre class="r"><code># simple cross table with percents (denominator is row by default)
penguins %&gt;% 
  tabyl(species, sex) %&gt;%
  adorn_percentages()</code></pre>
<pre><code>##    species    female      male        NA_
##     Adelie 0.4802632 0.4802632 0.03947368
##  Chinstrap 0.5000000 0.5000000 0.00000000
##     Gentoo 0.4677419 0.4919355 0.04032258</code></pre>
<pre class="r"><code>penguins %&gt;% 
  tabyl(species, sex) %&gt;%
  # instead of counts, show percentages, the default denominator is row
  adorn_percentages(denominator = &quot;col&quot;) </code></pre>
<pre><code>##    species    female      male       NA_
##     Adelie 0.4424242 0.4345238 0.5454545
##  Chinstrap 0.2060606 0.2023810 0.0000000
##     Gentoo 0.3515152 0.3630952 0.4545455</code></pre>
<pre class="r"><code>penguins %&gt;% 
  tabyl(species, sex) %&gt;%
  adorn_percentages(denominator = &quot;col&quot;) %&gt;%
  # add row and column totals, the default is to show just column totals in &quot;row&quot;
  # this makes for a strange row total, though, as we get 300%
  adorn_totals(where = c(&quot;row&quot;, &quot;col&quot;)) </code></pre>
<pre><code>##    species    female      male       NA_     Total
##     Adelie 0.4424242 0.4345238 0.5454545 1.4224026
##  Chinstrap 0.2060606 0.2023810 0.0000000 0.4084416
##     Gentoo 0.3515152 0.3630952 0.4545455 1.1691558
##      Total 1.0000000 1.0000000 1.0000000 3.0000000</code></pre>
<pre class="r"><code>penguins %&gt;% 
  tabyl(species, sex) %&gt;%
  adorn_percentages(denominator = &quot;col&quot;) %&gt;%
  adorn_totals(where = c(&quot;row&quot;, &quot;col&quot;)) %&gt;%
  # need to have adorn_totals BEFORE adding pct formatting, otherwise error
  adorn_pct_formatting()</code></pre>
<pre><code>##    species female   male    NA_  Total
##     Adelie  44.2%  43.5%  54.5% 142.2%
##  Chinstrap  20.6%  20.2%   0.0%  40.8%
##     Gentoo  35.2%  36.3%  45.5% 116.9%
##      Total 100.0% 100.0% 100.0% 300.0%</code></pre>
<pre class="r"><code>penguins %&gt;% 
  tabyl(species, sex) %&gt;%
  adorn_percentages(denominator = &quot;col&quot;) %&gt;%
  adorn_totals(where = c(&quot;row&quot;, &quot;col&quot;)) %&gt;%
  adorn_pct_formatting() %&gt;%
  # add back in counts in ()
  # need to have adorn_ns AFTER adding pct formatting, otherwise error
  adorn_ns()</code></pre>
<pre><code>##    species       female         male         NA_        Total
##     Adelie  44.2%  (73)  43.5%  (73)  54.5%  (6) 142.2% (152)
##  Chinstrap  20.6%  (34)  20.2%  (34)   0.0%  (0)  40.8%  (68)
##     Gentoo  35.2%  (58)  36.3%  (61)  45.5%  (5) 116.9% (124)
##      Total 100.0% (165) 100.0% (168) 100.0% (11) 300.0% (344)</code></pre>
<pre class="r"><code>penguins %&gt;% 
  tabyl(species, sex) %&gt;%
  # percent of total (denominator is the total sum)
  adorn_percentages(denominator = &quot;all&quot;) %&gt;%
  # now it makes more sense to have totals in both row and column
  adorn_totals(where = c(&quot;row&quot;, &quot;col&quot;)) %&gt;%
  adorn_pct_formatting() %&gt;%
  adorn_ns()</code></pre>
<pre><code>##    species      female        male       NA_        Total
##     Adelie 21.2%  (73) 21.2%  (73) 1.7%  (6)  44.2% (152)
##  Chinstrap  9.9%  (34)  9.9%  (34) 0.0%  (0)  19.8%  (68)
##     Gentoo 16.9%  (58) 17.7%  (61) 1.5%  (5)  36.0% (124)
##      Total 48.0% (165) 48.8% (168) 3.2% (11) 100.0% (344)</code></pre>
<pre class="r"><code>penguins %&gt;% 
  tabyl(species, sex) %&gt;%
  adorn_percentages(denominator = &quot;all&quot;) %&gt;%
  adorn_totals(where = c(&quot;row&quot;, &quot;col&quot;)) %&gt;%
  adorn_pct_formatting() %&gt;%
  adorn_ns() %&gt;%
  # add title, need placement = &quot;combined&quot; for gt to work
  adorn_title(placement = &quot;combined&quot;) %&gt;%
  # make it fancy html
  gt()</code></pre>
<div id="ezlowiephz" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ezlowiephz .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ezlowiephz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ezlowiephz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ezlowiephz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ezlowiephz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ezlowiephz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ezlowiephz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ezlowiephz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ezlowiephz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ezlowiephz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ezlowiephz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ezlowiephz .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ezlowiephz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ezlowiephz .gt_from_md > :first-child {
  margin-top: 0;
}

#ezlowiephz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ezlowiephz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ezlowiephz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ezlowiephz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ezlowiephz .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ezlowiephz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ezlowiephz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ezlowiephz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ezlowiephz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ezlowiephz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ezlowiephz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ezlowiephz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ezlowiephz .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ezlowiephz .gt_left {
  text-align: left;
}

#ezlowiephz .gt_center {
  text-align: center;
}

#ezlowiephz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ezlowiephz .gt_font_normal {
  font-weight: normal;
}

#ezlowiephz .gt_font_bold {
  font-weight: bold;
}

#ezlowiephz .gt_font_italic {
  font-style: italic;
}

#ezlowiephz .gt_super {
  font-size: 65%;
}

#ezlowiephz .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">species/sex</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">NA_</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Total</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Adelie</td>
<td class="gt_row gt_left">21.2%  (73)</td>
<td class="gt_row gt_left">21.2%  (73)</td>
<td class="gt_row gt_left">1.7%  (6)</td>
<td class="gt_row gt_left">44.2% (152)</td></tr>
    <tr><td class="gt_row gt_left">Chinstrap</td>
<td class="gt_row gt_left">9.9%  (34)</td>
<td class="gt_row gt_left">9.9%  (34)</td>
<td class="gt_row gt_left">0.0%  (0)</td>
<td class="gt_row gt_left">19.8%  (68)</td></tr>
    <tr><td class="gt_row gt_left">Gentoo</td>
<td class="gt_row gt_left">16.9%  (58)</td>
<td class="gt_row gt_left">17.7%  (61)</td>
<td class="gt_row gt_left">1.5%  (5)</td>
<td class="gt_row gt_left">36.0% (124)</td></tr>
    <tr><td class="gt_row gt_left">Total</td>
<td class="gt_row gt_left">48.0% (165)</td>
<td class="gt_row gt_left">48.8% (168)</td>
<td class="gt_row gt_left">3.2% (11)</td>
<td class="gt_row gt_left">100.0% (344)</td></tr>
  </tbody>
  
  
</table>
</div>
<pre class="r"><code>penguins %&gt;% 
  tabyl(species, sex) %&gt;%
  adorn_percentages(denominator = &quot;all&quot;) %&gt;%
  adorn_totals(where = c(&quot;row&quot;, &quot;col&quot;)) %&gt;%
  adorn_pct_formatting() %&gt;%
  adorn_ns() %&gt;%
  # make it fancy html
  # specify that species denotes the name of the rows (removes that column label)
  # adds line between row names and rest of table
  gt::gt(rowname_col = &quot;species&quot;) %&gt;%
  # adds back in Species above rows
  gt::tab_stubhead(
    label = &quot;Species&quot;
  ) %&gt;%
  # adds header
  gt::tab_header(
    title = &quot;Species by sex percentages (counts)&quot;,
    subtitle = &quot;Palmer penguin data&quot;
  ) %&gt;%
  # adds sex label across multiple columns
  gt::tab_spanner(
    label = &quot;Sex&quot;,
    columns = c(female, male, `NA_`)
  )</code></pre>
<div id="ntujrirayo" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ntujrirayo .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ntujrirayo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ntujrirayo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ntujrirayo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ntujrirayo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ntujrirayo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ntujrirayo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ntujrirayo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ntujrirayo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ntujrirayo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ntujrirayo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ntujrirayo .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ntujrirayo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ntujrirayo .gt_from_md > :first-child {
  margin-top: 0;
}

#ntujrirayo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ntujrirayo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ntujrirayo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ntujrirayo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ntujrirayo .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ntujrirayo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ntujrirayo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ntujrirayo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ntujrirayo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ntujrirayo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ntujrirayo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ntujrirayo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ntujrirayo .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ntujrirayo .gt_left {
  text-align: left;
}

#ntujrirayo .gt_center {
  text-align: center;
}

#ntujrirayo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ntujrirayo .gt_font_normal {
  font-weight: normal;
}

#ntujrirayo .gt_font_bold {
  font-weight: bold;
}

#ntujrirayo .gt_font_italic {
  font-style: italic;
}

#ntujrirayo .gt_super {
  font-size: 65%;
}

#ntujrirayo .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="5" class="gt_heading gt_title gt_font_normal" style>Species by sex percentages (counts)</th>
    </tr>
    <tr>
      <th colspan="5" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Palmer penguin data</th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1">Species</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3">
        <span class="gt_column_spanner">Sex</span>
      </th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1">Total</th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">female</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">male</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">NA_</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left gt_stub">Adelie</td>
<td class="gt_row gt_left">21.2%  (73)</td>
<td class="gt_row gt_left">21.2%  (73)</td>
<td class="gt_row gt_left">1.7%  (6)</td>
<td class="gt_row gt_left">44.2% (152)</td></tr>
    <tr><td class="gt_row gt_left gt_stub">Chinstrap</td>
<td class="gt_row gt_left">9.9%  (34)</td>
<td class="gt_row gt_left">9.9%  (34)</td>
<td class="gt_row gt_left">0.0%  (0)</td>
<td class="gt_row gt_left">19.8%  (68)</td></tr>
    <tr><td class="gt_row gt_left gt_stub">Gentoo</td>
<td class="gt_row gt_left">16.9%  (58)</td>
<td class="gt_row gt_left">17.7%  (61)</td>
<td class="gt_row gt_left">1.5%  (5)</td>
<td class="gt_row gt_left">36.0% (124)</td></tr>
    <tr><td class="gt_row gt_left gt_stub">Total</td>
<td class="gt_row gt_left">48.0% (165)</td>
<td class="gt_row gt_left">48.8% (168)</td>
<td class="gt_row gt_left">3.2% (11)</td>
<td class="gt_row gt_left">100.0% (344)</td></tr>
  </tbody>
  
  
</table>
</div>
<p>See the <a href="https://gt.rstudio.com/articles/intro-creating-gt-tables.html">intro to gt package for more examples like this</a>.</p>
<blockquote>
<p>sort and deduplicate prior to joining tables: Would you mind sharing an example of how to do this to avoid the multiple key warning when merging tables?</p>
</blockquote>
<p>Yes, I will first say that sometimes you <em>want</em> duplicate keys in your end result, which we will see in part 6 example. For instance, if you are joining a study cohort data set with longitudinal lab values in tidy “long” format.</p>
<p>But you do want to avoid having duplicate keys in both the left and right table, as this will cause chaos and extreme duplication of rows.</p>
<pre class="r"><code>example_cohort &lt;- tibble(
  name = c(&quot;jane&quot;, &quot;juan&quot;, &quot;jessica&quot;, &quot;jessica&quot;),
  value = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;c&quot;),
)

example_other &lt;- tibble(
  name = c(&quot;juan&quot;, &quot;juan&quot;,&quot;jessica&quot;),
  y = c(3, 1, 4)
)

example_cohort</code></pre>
<pre><code>## # A tibble: 4 × 2
##   name    value
##   &lt;chr&gt;   &lt;chr&gt;
## 1 jane    a    
## 2 juan    b    
## 3 jessica c    
## 4 jessica c</code></pre>
<pre class="r"><code>example_other</code></pre>
<pre><code>## # A tibble: 3 × 2
##   name        y
##   &lt;chr&gt;   &lt;dbl&gt;
## 1 juan        3
## 2 juan        1
## 3 jessica     4</code></pre>
<pre class="r"><code># with duplicate rows in the left and right data, 
# we end up with duplicated rows in the full data
left_join(example_cohort, 
          example_other)</code></pre>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 5 × 3
##   name    value     y
##   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;
## 1 jane    a        NA
## 2 juan    b         3
## 3 juan    b         1
## 4 jessica c         4
## 5 jessica c         4</code></pre>
<pre class="r"><code># these do the same thing, since only one matching key with the same &quot;name&quot;
left_join(example_cohort, 
          example_other,
          by = &quot;name&quot;)</code></pre>
<pre><code>## # A tibble: 5 × 3
##   name    value     y
##   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;
## 1 jane    a        NA
## 2 juan    b         3
## 3 juan    b         1
## 4 jessica c         4
## 5 jessica c         4</code></pre>
<pre class="r"><code>left_join(example_cohort, 
          example_other,
          by = c(&quot;name&quot; = &quot;name&quot;))</code></pre>
<pre><code>## # A tibble: 5 × 3
##   name    value     y
##   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;
## 1 jane    a        NA
## 2 juan    b         3
## 3 juan    b         1
## 4 jessica c         4
## 5 jessica c         4</code></pre>
<pre class="r"><code># perhaps the example_cohort was a mistake, 
# and we want to remove those duplicated rows first:
example_cohort %&gt;% distinct()</code></pre>
<pre><code>## # A tibble: 3 × 2
##   name    value
##   &lt;chr&gt;   &lt;chr&gt;
## 1 jane    a    
## 2 juan    b    
## 3 jessica c</code></pre>
<pre class="r"><code>left_join(
  example_cohort %&gt;% distinct(),
  example_other
)</code></pre>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 4 × 3
##   name    value     y
##   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;
## 1 jane    a        NA
## 2 juan    b         3
## 3 juan    b         1
## 4 jessica c         4</code></pre>
<pre class="r"><code># the above assumes that juan had two y values on purpose

# what if we didn&#39;t want two juan values in the &quot;example_other&quot; tibble
# let&#39;s assume we want only the lowest y value in example_other for each name
example_other %&gt;%
  group_by(name) %&gt;%
  slice_min(y)</code></pre>
<pre><code>## # A tibble: 2 × 2
## # Groups:   name [2]
##   name        y
##   &lt;chr&gt;   &lt;dbl&gt;
## 1 jessica     4
## 2 juan        1</code></pre>
<pre class="r"><code>left_join(
  example_cohort %&gt;% distinct(),
  example_other %&gt;% group_by(name) %&gt;% slice_min(y)
)</code></pre>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 3 × 3
##   name    value     y
##   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;
## 1 jane    a        NA
## 2 juan    b         1
## 3 jessica c         4</code></pre>
<pre class="r"><code># Here&#39;s a reminder about what inner join and full join would do in the original situation:

# same as left join in this case, takes all data from both tables
full_join(example_cohort, 
          example_other)</code></pre>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 5 × 3
##   name    value     y
##   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;
## 1 jane    a        NA
## 2 juan    b         3
## 3 juan    b         1
## 4 jessica c         4
## 5 jessica c         4</code></pre>
<pre class="r"><code># only uses names (the joining key) from both tables
inner_join(example_cohort, 
          example_other)</code></pre>
<pre><code>## Joining, by = &quot;name&quot;</code></pre>
<pre><code>## # A tibble: 4 × 3
##   name    value     y
##   &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;
## 1 juan    b         3
## 2 juan    b         1
## 3 jessica c         4
## 4 jessica c         4</code></pre>
<blockquote>
<p>Do we need to save all of our graphics that we make in our homework? like using ggsave() and a png file? Same with our glimpse/skim/summary bits that we code?</p>
</blockquote>
<p>You don’t need to unless I specifically state “save as a file” (i.e. with <code>ggsave()</code> or <code>write_csv()</code>) or “save as an object” (i.e. with <code>myplot &lt;- ggplot(.....</code> or <code>mysummary &lt;- summary(mydata)</code>) depending on the setting.</p>
<blockquote>
<p>Thank you for getting into “messy” data. I still would like more information about primary data.</p>
</blockquote>
<p>I have to admit I am not sure what you mean by “primary” data, because to me, this could mean an infinite number of things. It depends on the type of data and who is entering the data: is it coming from a person or a machine? Is it an export from Redcap, an EHR query, or an excel sheet where a person has entered the data by hand?</p>
<p>I would love to hear more about what kind of “primary” data people are interested in. Please send another survey message or comment on my question on slack!</p>
<p>In part 6 I have used a “real” data example, basically this is the most common type of primary data that I receive as a statistician – an excel sheet where someone in a lab has input data, copied some omics data from another excel sheet into that table, and sent it to me via email. This type of data can lend itself to lots of strange formatting issues, and also lots of data input error. It is not ideal, but this is where we’re at in science (see again <a href="https://www.tandfonline.com/doi/full/10.1080/00031305.2017.1375989">Broman &amp; Woo 2017, Data Organization in Spreadsheets</a> or <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7518408/">Ellis &amp; Leek 2018, How to share data for collaboration</a>).</p>
<p>I also need to teach you the basic tools for cleaning and manipulating data before I can get you started with “real” data in super messy format, because otherwise it might be overwhelming doing a series of steps! But I think you’re almost ready! You’ll see how the data cleaning steps can really pile on today during the modestly messy example. Most of my “data cleaning” or “importing” or “wrangling” tasks as a statistician involve dealing with weird spreadsheet formats, typos, missing values, and then creating new variables that I need for analyses or graphing. I think you’ve learned most of those tasks by now in this class. In part 6 we will practice these more. In future classes we will learn more about how to handle dates/times, more about string manipulation, reshaping data, and additional ways to deal with missing data.</p>
<p>If anyone has primary data they would like me to go over in class (and can share it), please send it to me! Or describe the data you have in mind.</p>
<p>There was a helpful suggestion to show data with the kind of demographic or survey variables that are somewhat difficult to keep cleanly categorized, but that are very important, such as sexual identity, race/ethnicitiy, disability, etc. I perused some of the publicly available data out there but haven’t found a good enough example yet; I will keep looking, but if you know of one send it my way, please!</p>
<blockquote>
<p>If we have 100 cvs to import, how to import data quickly?</p>
</blockquote>
<p>The best way is to use lists and <code>purrr</code>! We will hopefully get to lists by class 7 and <code>purrr</code> probably class 8. It also depends on whether these 100 csv files are in the same format and what you want to do with them after you import them. Are they able to be stacked, so you can use <code>bind_rows()</code>? If so, it would be something like this:</p>
<pre class="r"><code># have all the csvs in one place
folder_where_csvs_are &lt;- here::here(&quot;static/data&quot;)
# we can list all their names
list.files(folder_where_csvs_are, pattern = &quot;.csv&quot;)</code></pre>
<pre><code>## [1] &quot;injury.csv&quot;                &quot;math_camp.csv&quot;            
## [3] &quot;math_survey.csv&quot;           &quot;village_randomized.csv&quot;   
## [5] &quot;village_self_selected.csv&quot; &quot;world_happiness.csv&quot;</code></pre>
<pre class="r"><code># list all their names will full file path
all_csv_files &lt;- list.files(here::here(&quot;static/data&quot;), pattern = &quot;.csv&quot;, full.names = TRUE)
# use purrr map to load them in
list_of_data &lt;- purrr::map(all_csv_files, ~read_csv(.))</code></pre>
<pre><code>## Rows: 7150 Columns: 30
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## dbl (30): durat, afchnge, highearn, male, married, hosp, indust, injtype, ag...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## Rows: 2000 Columns: 8
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): math_camp
## dbl (7): id, final_grade, math_camp_num, undergrad_gpa, gre_quant, gre_verba...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## Rows: 216 Columns: 11
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (9): timestamp, teacher, treatment, math_feeling, good_at_math, math_eas...
## dbl (2): wave, id_in_class
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## Rows: 1000 Columns: 8
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (2): sex, program
## dbl (6): id, age, pre_income, post_income, sex_num, program_num
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## Rows: 1000 Columns: 6
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## dbl (6): id, sex, age, pre_income, program, post_income
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
## Rows: 217 Columns: 11
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (4): iso2c, country, region, income
## dbl (7): happiness_score, happiness_se, year, school_enrollment, life_expect...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code># list of data frames
class(list_of_data)</code></pre>
<pre><code>## [1] &quot;list&quot;</code></pre>
<pre class="r"><code># length of list
length(list_of_data)</code></pre>
<pre><code>## [1] 6</code></pre>
<pre class="r"><code># see the structure of the data
# str(list_of_data) # this is long output
# first element
glimpse(list_of_data[[1]])</code></pre>
<pre><code>## Rows: 7,150
## Columns: 30
## $ durat    &lt;dbl&gt; 1, 1, 84, 4, 1, 1, 7, 2, 175, 60, 29, 30, 100, 4, 2, 1, 1, 2,…
## $ afchnge  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ highearn &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ male     &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1…
## $ married  &lt;dbl&gt; 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1…
## $ hosp     &lt;dbl&gt; 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0…
## $ indust   &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1…
## $ injtype  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ age      &lt;dbl&gt; 26, 31, 37, 31, 23, 34, 35, 45, 41, 33, 35, 25, 39, 27, 24, 2…
## $ prewage  &lt;dbl&gt; 404.9500, 643.8250, 398.1250, 527.8000, 528.9375, 614.2500, 5…
## $ totmed   &lt;dbl&gt; 1187.57324, 361.07855, 8963.65723, 1099.64832, 372.80188, 211…
## $ injdes   &lt;dbl&gt; 1010, 1404, 1032, 1940, 1940, 1425, 1110, 1207, 1425, 1010, 1…
## $ benefit  &lt;dbl&gt; 246.8375, 246.8375, 246.8375, 246.8375, 211.5750, 176.3125, 2…
## $ ky       &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ mi       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ ldurat   &lt;dbl&gt; 0.0000000, 0.0000000, 4.4308167, 1.3862944, 0.0000000, 0.0000…
## $ afhigh   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ lprewage &lt;dbl&gt; 6.003764, 6.467427, 5.986766, 6.268717, 6.270870, 6.420402, 6…
## $ lage     &lt;dbl&gt; 3.258096, 3.433987, 3.610918, 3.433987, 3.135494, 3.526361, 3…
## $ ltotmed  &lt;dbl&gt; 7.079667, 5.889095, 9.100934, 7.002746, 5.921047, 5.351953, 4…
## $ head     &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ neck     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ upextr   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ trunk    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ lowback  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ lowextr  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ occdis   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ manuf    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1…
## $ construc &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ highlpre &lt;dbl&gt; 6.003764, 6.467427, 5.986766, 6.268717, 6.270870, 6.420402, 6…</code></pre>
<pre class="r"><code># if they were all the same columns and able to stack, we could do this
# big_data_frame &lt;- bind_rows(list_of_data)</code></pre>
</div>
<div id="clearest-points" class="section level1">
<h1>Clearest points</h1>
<blockquote>
<p>joining data, summarize &amp; group_by (we used these a lot in BSTA511)</p>
</blockquote>
<p>good to know, I like hearing about what you have already learned in BSTA511, so keep that comin’</p>
<blockquote>
<p>here () was a lot more clear on re-visiting.</p>
</blockquote>
<p>so glad!</p>
<blockquote>
<p>The summarize section was pretty understandable</p>
</blockquote>
<p>Glad to hear it, I was worried I rushed that. We will go over it again in class 6 anyway with <code>across()</code>.</p>
<blockquote>
<p>I appreciated the overall discussion on muddy points from previous session. This definitely helped.</p>
</blockquote>
<p>Good! We’re doing another long muddy review today too =)</p>
</div>
<div id="messages-to-me" class="section level1">
<h1>Messages to me</h1>
<blockquote>
<p>I feel like it would be really helpful (to me anyway) to hear about some stupid-but-useful R tidbits like: how you filter to get any row that doesn’t have an NA. Or how you filter to have any row that doesn’t have an NA in a particular column. I’m sure there’s tons more I haven’t thought of – those are just ones that I’ve wanted and struggled to come up with on my own in the past.</p>
</blockquote>
<p>Yes! I keep meaning to show you more with missing data. I have a couple more examples during class 6 using <code>drop_na()</code> to do all these things. Also those are very useful tidbits, sorry I haven’t gotten to them yet!</p>
<blockquote>
<p>The challenges are so helpful - great to try out what you are showing!</p>
</blockquote>
<p>Great to hear, class 6/part 6 has a toooon of challenges, maybe too many challenges. We will see how it goes =)</p>
<blockquote>
<p>I hope to spend some time on summary tables</p>
</blockquote>
<p>Thank you, we will definitely do this, starting with redo-ing the end of part 5 today, which we didn’t finish.</p>
<blockquote>
<p>Is it possible to have a list of all the packages we need for each assignment? I did get marked down for adding too many libraries since I keep getting them all jumbled between homework, practices, and out-of-class practice as well</p>
</blockquote>
<p>This is a good point, though I don’t think you’re getting marked down for having too many packages (if I’m wrong let me know!), I think Colin is just giving comments that you should try to avoid it. I didn’t think about this when writing homeworks but I will start giving you the packages I think you need. It’s hard to keep track of all the different ones when you are just starting out.</p>
<p>Honestly, I don’t do a very good job myself of only loading the minimal list of packages in each Rmd. In theory, it doesn’t matter too much—it may add some extra time to load the extra packages, but often I am copying my YAML and setup code from other Rmds and forget to take out the packages I don’t need.</p>
<p>One issue with loading too many packages is that function names can overlap between packages and cause errors or confusion. For instance, the function <code>select()</code> is in both the <code>tidyverse</code> or <code>dplyr</code> package and the <code>AnnotationDBI</code> Bioconductor package which I sometimes use. If I load the <code>AnnotationDbi</code> package after I load <code>dplyr</code>, R thinks I am trying to use <code>AnnotationDBI::select</code> instead of <code>dplyr::select</code>. There are ways around it, such as making sure you load <code>library(dplyr)</code> last, or when using <code>select</code> use <code>dplyr::select</code> explicitly in your code instead, or, redefining select this way:</p>
<pre class="r"><code>library(dplyr)
library(AnnotationDbi)</code></pre>
<pre><code>## Loading required package: stats4</code></pre>
<pre><code>## Loading required package: BiocGenerics</code></pre>
<pre><code>## Loading required package: parallel</code></pre>
<pre><code>## 
## Attaching package: &#39;BiocGenerics&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:parallel&#39;:
## 
##     clusterApply, clusterApplyLB, clusterCall, clusterEvalQ,
##     clusterExport, clusterMap, parApply, parCapply, parLapply,
##     parLapplyLB, parRapply, parSapply, parSapplyLB</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     combine, intersect, setdiff, union</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     IQR, mad, sd, var, xtabs</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     anyDuplicated, append, as.data.frame, basename, cbind, colnames,
##     dirname, do.call, duplicated, eval, evalq, Filter, Find, get, grep,
##     grepl, intersect, is.unsorted, lapply, Map, mapply, match, mget,
##     order, paste, pmax, pmax.int, pmin, pmin.int, Position, rank,
##     rbind, Reduce, rownames, sapply, setdiff, sort, table, tapply,
##     union, unique, unsplit, which.max, which.min</code></pre>
<pre><code>## Loading required package: Biobase</code></pre>
<pre><code>## Welcome to Bioconductor
## 
##     Vignettes contain introductory material; view with
##     &#39;browseVignettes()&#39;. To cite Bioconductor, see
##     &#39;citation(&quot;Biobase&quot;)&#39;, and for packages &#39;citation(&quot;pkgname&quot;)&#39;.</code></pre>
<pre><code>## Loading required package: IRanges</code></pre>
<pre><code>## Loading required package: S4Vectors</code></pre>
<pre><code>## 
## Attaching package: &#39;S4Vectors&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     first, rename</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     expand</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     expand.grid, I, unname</code></pre>
<pre><code>## 
## Attaching package: &#39;IRanges&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     collapse, desc, slice</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     reduce</code></pre>
<pre><code>## 
## Attaching package: &#39;AnnotationDbi&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     select</code></pre>
<pre class="r"><code>select</code></pre>
<pre><code>## standardGeneric for &quot;select&quot; defined from package &quot;AnnotationDbi&quot;
## 
## function (x, keys, columns, keytype, ...) 
## standardGeneric(&quot;select&quot;)
## &lt;bytecode: 0x7f8bd29ba840&gt;
## &lt;environment: 0x7f8bd12374f0&gt;
## Methods may be defined for arguments: x
## Use  showMethods(select)  for currently available ones.</code></pre>
<pre class="r"><code>select &lt;- dplyr::select

select</code></pre>
<pre><code>## function (.data, ...) 
## {
##     UseMethod(&quot;select&quot;)
## }
## &lt;bytecode: 0x7f8be6633f40&gt;
## &lt;environment: namespace:dplyr&gt;</code></pre>
</div>
