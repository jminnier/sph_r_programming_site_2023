<!DOCTYPE html>
<html lang="en-us" 
      xmlns:og="http://ogp.me/ns#" 
      xmlns:fb="https://www.facebook.com/2008/fbml">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.7.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Ted Laderas">

  
  
  
    
  
  <meta name="description" content="R Project files This year‚Äôs class video Last Year‚Äôs Class Video (Class 7, Part 6) Post-Class Muddiest Parts Clearest Points Other   R Project files Last class we finished up part5 materials. This is class 7, and we will start with part6 now (sorry, we‚Äôre going to be off by one from now on). Please download the part6 sub-folder from this dropbox folder link.
This section is mainly a practice, with some additional ggplot lessons.">

  
  <link rel="alternate" hreflang="en-us" href="https://sph-r-programming-2023.netlify.app/class/07-class/">

  


  
  
  
  <meta name="theme-color" content="#000066">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans+Condensed:400,400i,700,700i%7COverpass:400,400i,700,700i&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="https://sph-r-programming-2023.netlify.app/class/07-class/">

  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@datapointier">
  <meta property="twitter:creator" content="@datapointier">
  
  <meta property="og:site_name" content="R Programming 2023">
  <meta property="og:url" content="https://sph-r-programming-2023.netlify.app/class/07-class/">
  <meta property="og:title" content="(Class 7) Part 6: Messy data example, more data wrangling and ggplot | R Programming 2023">
  <meta property="og:description" content="R Project files This year‚Äôs class video Last Year‚Äôs Class Video (Class 7, Part 6) Post-Class Muddiest Parts Clearest Points Other   R Project files Last class we finished up part5 materials. This is class 7, and we will start with part6 now (sorry, we‚Äôre going to be off by one from now on). Please download the part6 sub-folder from this dropbox folder link.
This section is mainly a practice, with some additional ggplot lessons."><meta property="og:image" content="https://sph-r-programming-2023.netlify.app/img/social-image.png">
  <meta property="twitter:image" content="https://sph-r-programming-2023.netlify.app/img/social-image.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2023-02-22T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2023-02-28T20:54:18-08:00">
  

  



  


  


  <link rel="shortcut icon" href="https://sph-r-programming-2023.netlify.app/favicon.ico" />
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="https://sph-r-programming-2023.netlify.app/img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="https://sph-r-programming-2023.netlify.app/img/favicon-16x16.png" sizes="16x16" />
  <meta name="application-name" content="BSTA 504: R Programming 2023" />
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="https://sph-r-programming-2023.netlify.app/img/mstile-144x144.png" />


  <title>(Class 7) Part 6: Messy data example, more data wrangling and ggplot | R Programming 2023</title>

</head>


<body id="top" data-spy="scroll" data-offset="70"
    data-target="#TableOfContents"
    >

    <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


    







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">R Programming 2023</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">R Programming 2023</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/reading/"><span>Readings</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/class/"><span>Classes</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/functions/"><span>Functions</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="https://sph-r-programming-2023-midterms.netlify.app/" target="_blank" rel="noopener"><span>Midterm Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/reviews/"><span>Course Reviews</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      

      

      

    </ul>

  </div>
</nav>


    

<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
            





  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/class/01-class/">Class sessions</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/class/01-class/">Class 1.  Introduction to R/Rstudio/Vectors</a>
      </li>
      
      <li >
        <a href="/class/02-class/">Part 2: Loading Data, data.frames, and ggplot2</a>
      </li>
      
      <li >
        <a href="/class/03-class/">Part 3: ggplot2, factors, boxplots, dplyr: subsetting</a>
      </li>
      
      <li >
        <a href="/class/04-class/">Part 4. dplyr: mutate, group_by, summarize, across</a>
      </li>
      
      <li >
        <a href="/class/05-class/">(Class 5) Part 4 (contd) &#43; Part 5: Data summarizing</a>
      </li>
      
      <li >
        <a href="/class/06-class/">(Class 6) Part 5 contd: Data summarizing, reshaping, and wrangling with multiple tables (contd)</a>
      </li>
      
      <li class="active">
        <a href="/class/07-class/">(Class 7) Part 6: Messy data example, more data wrangling and ggplot</a>
      </li>
      
      <li >
        <a href="/class/08-class/">(Class 8) Part 6 Continued, Part 7: Lists/Functions/Intro to Purrr</a>
      </li>
      
      <li >
        <a href="/class/09-class/">(Class 9) Part 7 continued and Part 8 . Intro to stats/`broom`/More Purrr</a>
      </li>
      
      <li >
        <a href="/class/10-class/">(Class 10): Part 8 (contd). Intro to stats/`broom`/More Purrr</a>
      </li>
      
      <li >
        <a href="/class/11-class/">Class 11: No Class, Just Office Hours</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

        </div>

        

        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

            <article class="article">

                <div class="docs-article-container">
                    <h1>(Class 7) Part 6: Messy data example, more data wrangling and ggplot</h1>

                    

                    

                    
                    <div class="due-date p-2 mb-3 bg-secondary text-white">
                        Materials from class on Wednesday, February 22, 2023
                    </div>
                    

                    <div class="article-style">
                        

<div id="TOC">
<ul>
<li><a href="#r-project-files" id="toc-r-project-files">R Project files</a></li>
<li><a href="#this-years-class-video" id="toc-this-years-class-video">This year‚Äôs class video</a></li>
<li><a href="#last-years-class-video-class-7-part-6" id="toc-last-years-class-video-class-7-part-6">Last Year‚Äôs Class Video (Class 7, Part 6)</a></li>
<li><a href="#post-class" id="toc-post-class">Post-Class</a></li>
<li><a href="#muddiest-parts" id="toc-muddiest-parts">Muddiest Parts</a></li>
<li><a href="#clearest-points" id="toc-clearest-points">Clearest Points</a></li>
<li><a href="#other" id="toc-other">Other</a></li>
</ul>
</div>

<div id="r-project-files" class="section level2">
<h2>R Project files</h2>
<p>Last class we finished up part5 materials. This is class 7, and we will start with part6 now (sorry, we‚Äôre going to be off by one from now on). Please download the part6 sub-folder from <a href="https://bit.ly/bsta504_dropbox_2023">this dropbox folder link</a>.</p>
<p>This section is mainly a practice, with some additional ggplot lessons. There will be lots of time for challenges so that you can get practice working on these data wrangling and graphing problems together.</p>
</div>
<div id="this-years-class-video" class="section level2">
<h2>This year‚Äôs class video</h2>
<p>See Slack for the zoom recording link (though zoom had some malfunction that failed to show the correct Rstudio screen, so last year‚Äôs video may be more helpful)</p>
</div>
<div id="last-years-class-video-class-7-part-6" class="section level2">
<h2>Last Year‚Äôs Class Video (Class 7, Part 6)</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/j-eoXIEGQQg" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>View last year‚Äôs class and materials <a href="https://sph-r-programming-2022.netlify.app/class/07-class/">here</a>.</p>
</div>
<div id="post-class" class="section level1">
<h1>Post-Class</h1>
<p>Please fill out the following survey and we will discuss the results during the next lecture. All responses will be anonymous.</p>
<ul>
<li>Clearest Point: What was the most clear part of the lecture?</li>
<li>Muddiest Point: What was the most unclear part of the lecture to you?</li>
<li>Anything Else: Is there something you‚Äôd like me to know?</li>
</ul>
<p><a href="https://bit.ly/bsta504_postclass_survey" class="uri">https://bit.ly/bsta504_postclass_survey</a></p>
</div>
<div id="muddiest-parts" class="section level1">
<h1>Muddiest Parts</h1>
<p>Still some pain points related to <code>pivot_</code>-ing. I get it, it took me a long time to get comfortable with this (and I‚Äôve gone through multiple function and argument transformations from <code>melt()</code> to <code>gather()</code> to <code>pivot_longer()</code> etc, all those transitions were hard!). We might not see many more examples with this because we have so much more to cover, but keep practicing, and ask for help when you need it! Relatedly:</p>
<blockquote>
<p>pivot_longer is so versatile for data manipulation but sometimes it‚Äôs contains many arguments</p>
</blockquote>
<blockquote>
<p>When ever I use pivot_longer and pivot_wider I get the columns that are being switched wrong.Is there a way you think about it that helps you sort out which is which? The Stata manual uses this ‚Äòi‚Äô and ‚Äòj‚Äô notation that‚Äôs helping when I‚Äôm working in Stata, but I haven‚Äôt found an easy way to work with those functions in R.</p>
</blockquote>
<p>The argument names have changed a lot since I started pivoting with the tidyverse, but now they are using <code>names_to=</code> because the authors think this makes more sense, and I tend to agree. This argument name helps me figure out what to do more than old versions. I think of this argument as ‚Äúcolumn names turn into one column called = X‚Äù or send the ‚Äúnames‚Äù of these columns ‚Äúto‚Äù this new column. Therefore, I need to specify which <code>cols=</code> are the column names going into <code>names_to=</code></p>
<p>Then, when we go to <code>pivot_wider()</code> we get <code>names_from=</code> which is asking, where are the column names coming from? Also, <code>values_from=</code> which is asking, where are the actual values coming from? Pivot wider to me is easier because we don‚Äôt need to specify any other information than those two pieces (you can optionally specify <code>id_cols=</code> but the default is just to use all the other columns that you‚Äôre not pivoting). Pivot wider is tricky, however, in that you do need just one value for each combination of id columns.</p>
<p>If you‚Äôre still having trouble, you‚Äôre not alone, <a href="https://www.infoworld.com/article/3637083/never-look-up-tidyrs-pivotwider-or-pivotlonger-again.html">look at this article on how to create a code snippet that pops up to tell you exactly what to do, every time:</a> (and there‚Äôs more about what ‚Äúsnippets‚Äù are in that article).</p>
<pre><code>snippet plonger
	pivot_longer(${1:mydf},
	             cols = ${2:columns to pivot long},
	             names_to = &quot;${3:desired name for category column}&quot;,
	             values_to = &quot;${4:desired name for value column}&quot;
	)</code></pre>
<blockquote>
<p>I struggled with the pivoting of tables on assignment #5, and still have some trouble wrapping my head around it‚Äì especially when we pivoted the long table back to wide but with different column names.</p>
</blockquote>
<p>One difficult thing to grasp about pivoting is the idea of pivoting long, and then even longer (doubly long?), and then back again to wide but in a different way, with different information in the columns. This takes a <em>lot</em> of practice to get there without a lot of struggle. After you have done this many times you‚Äôll be better able to see what you need out of the data frame and how to get it there. I wish we had more time to just pivot things in all sorts of ways, because it‚Äôs a powerful form of data manipulation!</p>
<blockquote>
<p>Faceting in ggplot
I need to play with setting plot scales to actual values with ‚Äúfree_x/free_y‚Äù</p>
</blockquote>
<p>This is something I think you‚Äôll need to ‚Äúplay around with‚Äù to just, try some things and see how it affects the plot. The homework faceting is similar to the example plot we did in class last week, but, there‚Äôs a lot more you can do with faceting and it‚Äôs a very powerful way to display data. The <code>ggplot2</code> book‚Äôs <a href="https://ggplot2-book.org/facet.html">Faceting chapter</a> is a nice review of this.</p>
<p>I‚Äôve also been meaning to mention that the ggplot2 package website has useful FAQs on lots of tricky subjects. <a href="https://ggplot2.tidyverse.org/articles/faq-faceting.html">Here‚Äôs the faceting one.</a></p>
<blockquote>
<p>Reading the vignette for summarize and list. Can you explain how to read this vignette.</p>
</blockquote>
<p>Sorry I couldn‚Äôt figure out which vignette you were talking about here, could you send me the link? Or maybe you are looking for a link‚Ä¶ Usually if I mention a vignette in class I have the link the Rmd/html file. Otherwise, the best way to find package vignettes is by going to the package website. Most of the tidyverse packages have a website, and the vignettes will often be in the ‚ÄúArticles‚Äù drop down. For instance, <a href="https://dplyr.tidyverse.org/articles/index.html">here‚Äôs dplyr‚Äôs website and list of articles/vignettes</a>, but I don‚Äôt see one on summarize/lists! You can also see vignettes in the CRAN package‚Äôs website usually, for instance here‚Äôs <a href="https://cran.r-project.org/web/packages/dplyr/index.html">dplyr</a></p>
<blockquote>
<p>Can we go over how to create a summary table with percentages using summary and across?</p>
</blockquote>
<p>This depends on exactly what you want to do. I might use one of the fancier functions like <code>gtsummary::tbl_summary()</code> or <code>table1::table1</code> for a true ‚Äúsummary table‚Äù of all my categorical variables, but we can see how this would work with <code>summarize()</code> ‚Äúby hand‚Äù. We are going to see in part6 some examples with <code>tabyl</code>, as well.</p>
<p>Here‚Äôs an example just with summarize:</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ
## ‚úî dplyr     1.1.0     ‚úî readr     2.1.4
## ‚úî forcats   1.0.0     ‚úî stringr   1.5.0
## ‚úî ggplot2   3.4.1     ‚úî tibble    3.1.8
## ‚úî lubridate 1.9.2     ‚úî tidyr     1.3.0
## ‚úî purrr     1.0.1     
## ‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ
## ‚úñ dplyr::filter() masks stats::filter()
## ‚úñ dplyr::lag()    masks stats::lag()
## ‚Ñπ Use the ]8;;http://conflicted.r-lib.org/conflicted package]8;; to force all conflicts to become errors</code></pre>
<pre class="r"><code>library(janitor)</code></pre>
<pre><code>## 
## Attaching package: &#39;janitor&#39;
## 
## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<pre class="r"><code>library(palmerpenguins)

# First with tabyl, using adorn_ (which we will see in part6 today)
penguins %&gt;%
  tabyl(species, sex) %&gt;%
  adorn_percentages() %&gt;%
  adorn_pct_formatting()</code></pre>
<pre><code>##    species female  male  NA_
##     Adelie  48.0% 48.0% 3.9%
##  Chinstrap  50.0% 50.0% 0.0%
##     Gentoo  46.8% 49.2% 4.0%</code></pre>
<pre class="r"><code># try to get the same information with summarize:
penguins %&gt;%
  group_by(species) %&gt;%
  summarize(pct_male = sum(sex==&quot;male&quot;, na.rm = TRUE)/length(sex),
            pct_female = sum(sex==&quot;female&quot;, na.rm = TRUE)/length(sex),
            pct_NA = sum(is.na(sex), na.rm = TRUE)/length(sex)) %&gt;%
  mutate(across(where(is.numeric), ~.x*100))</code></pre>
<pre><code>## # A tibble: 3 √ó 4
##   species   pct_male pct_female pct_NA
##   &lt;fct&gt;        &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
## 1 Adelie        48.0       48.0   3.95
## 2 Chinstrap     50         50     0   
## 3 Gentoo        49.2       46.8   4.03</code></pre>
<pre class="r"><code># mean also works:
penguins %&gt;%
  group_by(species) %&gt;%
  summarize(pct_male = mean(sex==&quot;male&quot;, na.rm = TRUE),
            pct_female = mean(sex==&quot;female&quot;, na.rm = TRUE),
            pct_NA = mean(is.na(sex), na.rm = TRUE)) %&gt;%
  mutate(across(where(is.numeric), ~.x*100))</code></pre>
<pre><code>## # A tibble: 3 √ó 4
##   species   pct_male pct_female pct_NA
##   &lt;fct&gt;        &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
## 1 Adelie        50         50     3.95
## 2 Chinstrap     50         50     0   
## 3 Gentoo        51.3       48.7   4.03</code></pre>
<p>But it‚Äôs hard to generalize that specific <code>summarize</code> to other columns with <code>across()</code>, because nothing else has the category ‚Äúmale‚Äù, ‚Äúfemale‚Äù. You‚Äôd need your data to be in quite a particular format, so I think this not something you‚Äôll commonly do. You could calculate proportion missing, though, which is a similar idea:</p>
<pre class="r"><code>penguins %&gt;% group_by(species) %&gt;%
  summarize(across(everything(), .fns= ~ mean(is.na(.x))))</code></pre>
<pre><code>## # A tibble: 3 √ó 8
##   species   island bill_length_mm bill_depth_mm flipper_l‚Ä¶¬π body_‚Ä¶¬≤    sex  year
##   &lt;fct&gt;      &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 Adelie         0        0.00658       0.00658     0.00658 0.00658 0.0395     0
## 2 Chinstrap      0        0             0           0       0       0          0
## 3 Gentoo         0        0.00806       0.00806     0.00806 0.00806 0.0403     0
## # ‚Ä¶ with abbreviated variable names ¬π‚Äãflipper_length_mm, ¬≤‚Äãbody_mass_g</code></pre>
</div>
<div id="clearest-points" class="section level1">
<h1>Clearest Points</h1>
<p>Lots of joining and binding, great!</p>
<blockquote>
<p>Outlining the steps you took and what you are looking for in the data was really helpful.</p>
</blockquote>
<blockquote>
<p>I really liked the flow of explanation on data management yesterday, thank you!</p>
</blockquote>
<p>That‚Äôs great to hear, I almost completely got rid of part6 because I wasn‚Äôt sure if it would be that helpful. Hopefully it provided some useful practice with messier data!</p>
</div>
<div id="other" class="section level1">
<h1>Other</h1>
<blockquote>
<p>We followed an example where we had a graph to strive for, but is there an example or just advice you can provide when we don‚Äôt have that? How do you know to leave the demographic information aside and only join the other data first?</p>
</blockquote>
<p>I don‚Äôt think there‚Äôs good one size fits all advice here. For that particular question, I could have joined the demographic data with each piece of the other data, that is also an option. That also would have avoided the need for <code>bind_rows()</code>, so that‚Äôs a good point. I do tend to create separate data sets by ‚Äútype‚Äù so for instance in that example I wanted all of the biomarker/outcome data together, just so I knew where it was. That‚Äôs my main reason for binding those data together first.</p>
<blockquote>
<p>Working with messy data seems very scary!!!</p>
</blockquote>
<blockquote>
<p>It‚Äôs so useful to learn how to work with super messy data because unfortunately that‚Äôs often how people have their data set up!</p>
</blockquote>
<p>Messy data <em>is</em> scary, I agree!</p>
<blockquote>
<p>Why do you use here::here sometimes and other times it‚Äôs just here without the here:: preceding it?</p>
</blockquote>
<p>Usually <code>pckgname::functioname()</code> is not necessary but used for clarification where that function is coming from. I sometimes do that in case I haven‚Äôt loaded the package first. Since I often use the <code>here</code> package at the beginning of my script when loading in data for an analysis, I‚Äôm not used to loading like other packages, but instead just call that function by using <code>here::here()</code>, so it‚Äôs somewhat due to habit!</p>
</div>

                    </div>

                    



                    
                </div>

                <div class="body-footer">
                    <p>Last updated on February 28, 2023</p>

                    





  
  

<p class="edit-page">
  <a href="https://github.com/jminnier/sph_r_programming_site/edit/master/content/class/07-class.html">
    <i class="fas fa-pen pr-2"></i>Edit this page
  </a>
</p>




                    

                </div>

            </article>

            <footer>
    <hr>

    <div class="row course-info">
        <div class="col-md-7">
            <p>
                <strong>BSTA 504: R Programming 2023 (Winter 2023)</strong><br>

                <a href="https://www.ohsu.edu" target="_blank" rel="noopener">Oregon Health &amp; Science University / Portland State University</a> &emsp;&emsp;
                <a href="https://ohsu-psu-sph.org/" target="_blank" rel="noopener">OHSU/PSU School of Public Health</a>
            </p>

            <p>
                <a href="http://jessicaminnier.com" target="_blank" rel="noopener"><i class="fas fa-user"></i>
                    Dr. Jessica Minnier</a> &emsp;&emsp;
                <a href="mailto:minnier@ohsu.edu"><i class="fas fa-envelope"></i>
                    minnier@ohsu.edu</a>
            </p>

            <p>
                <i class="far fa-calendar-alt"></i> Wednesdays &emsp;&emsp;
                <i class="far fa-clock"></i> 3:15‚Äì6:05 PM <br>
                <i class="fas fa-university"></i> See Sakai
            </p>
        </div>

        <div class="col-md-5 credits">
            <p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
            
            <p>Content <i class="fab fa-creative-commons"></i> 2023 <a href="http://jessicaminnier.com" target="_blank" rel="noopener">ted &amp; jessica</a></p>
        
            <p>This site created with the <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> adapted by <a href="https://github.com/laderast/sph_r_programming_site" target="_blank" rel="noopener">Ted Laderas</a> and <a href="https://github.com/andrewheiss/evalsp20.classes.andrewheiss.com" target="_blank" rel="noopener">Andrew Heiss</a> in <a href="https://bookdown.org/yihui/blogdown/" target="_blank" rel="noopener">blogdown</a> and <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>. </p>
            
            <p><a href="https://github.com/jminnier/sph_r_programming_site" target="_blank" rel="noopener"><i class="fab fa-github"></i> View the source at GitHub.</a></p>
        </div>
    </div>
</footer>


        </main>
    </div>
</div>

        

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.a1c3596268a997890f5b9089b30365c6.js"></script>

    






    
    

    
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>

</html>
