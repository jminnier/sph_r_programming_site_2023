<!DOCTYPE html>
<html lang="en-us" 
      xmlns:og="http://ogp.me/ns#" 
      xmlns:fb="https://www.facebook.com/2008/fbml">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.7.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Ted Laderas">

  
  
  
    
  
  <meta name="description" content="R Project files This year’s class video Last Year’s Class Video (Part 5 continued, split about the same) Post-Class Muddiest Points  When do we use which join? separate example Other: piping troubles    R Project files In this class we will finish the part5 material from this folder link. There are a couple updates so please download part5_updated.Rmd and part5_haven.Rmd.
 This year’s class video See Slack for the zoom recording link (though zoom had some malfunction that failed to show the correct Rstudio screen, so last year’s video may be more helpful)">

  
  <link rel="alternate" hreflang="en-us" href="https://sph-r-programming-2023.netlify.app/class/06-class/">

  


  
  
  
  <meta name="theme-color" content="#000066">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans+Condensed:400,400i,700,700i%7COverpass:400,400i,700,700i&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="https://sph-r-programming-2023.netlify.app/class/06-class/">

  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@datapointier">
  <meta property="twitter:creator" content="@datapointier">
  
  <meta property="og:site_name" content="R Programming 2023">
  <meta property="og:url" content="https://sph-r-programming-2023.netlify.app/class/06-class/">
  <meta property="og:title" content="(Class 6) Part 5 contd: Data summarizing, reshaping, and wrangling with multiple tables (contd) | R Programming 2023">
  <meta property="og:description" content="R Project files This year’s class video Last Year’s Class Video (Part 5 continued, split about the same) Post-Class Muddiest Points  When do we use which join? separate example Other: piping troubles    R Project files In this class we will finish the part5 material from this folder link. There are a couple updates so please download part5_updated.Rmd and part5_haven.Rmd.
 This year’s class video See Slack for the zoom recording link (though zoom had some malfunction that failed to show the correct Rstudio screen, so last year’s video may be more helpful)"><meta property="og:image" content="https://sph-r-programming-2023.netlify.app/img/social-image.png">
  <meta property="twitter:image" content="https://sph-r-programming-2023.netlify.app/img/social-image.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2023-02-15T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2023-02-28T20:44:41-08:00">
  

  



  


  


  <link rel="shortcut icon" href="https://sph-r-programming-2023.netlify.app/favicon.ico" />
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://sph-r-programming-2023.netlify.app/img/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="https://sph-r-programming-2023.netlify.app/img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="https://sph-r-programming-2023.netlify.app/img/favicon-16x16.png" sizes="16x16" />
  <meta name="application-name" content="BSTA 504: R Programming 2023" />
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="https://sph-r-programming-2023.netlify.app/img/mstile-144x144.png" />


  <title>(Class 6) Part 5 contd: Data summarizing, reshaping, and wrangling with multiple tables (contd) | R Programming 2023</title>

</head>


<body id="top" data-spy="scroll" data-offset="70"
    data-target="#TableOfContents"
    >

    <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


    







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">R Programming 2023</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">R Programming 2023</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/reading/"><span>Readings</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/class/"><span>Classes</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/functions/"><span>Functions</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/reviews/"><span>Course Reviews</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      

      

      

    </ul>

  </div>
</nav>


    

<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
            





  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/class/01-class/">Class sessions</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/class/01-class/">Class 1.  Introduction to R/Rstudio/Vectors</a>
      </li>
      
      <li >
        <a href="/class/02-class/">Part 2: Loading Data, data.frames, and ggplot2</a>
      </li>
      
      <li >
        <a href="/class/03-class/">Part 3: ggplot2, factors, boxplots, dplyr: subsetting</a>
      </li>
      
      <li >
        <a href="/class/04-class/">Part 4. dplyr: mutate, group_by, summarize, across</a>
      </li>
      
      <li >
        <a href="/class/05-class/">(Class 5) Part 4 (contd) &#43; Part 5: Data summarizing</a>
      </li>
      
      <li class="active">
        <a href="/class/06-class/">(Class 6) Part 5 contd: Data summarizing, reshaping, and wrangling with multiple tables (contd)</a>
      </li>
      
      <li >
        <a href="/class/07-class/">(Class 7) Part 6: Messy data example, more data wrangling and ggplot</a>
      </li>
      
      <li >
        <a href="/class/08-class/">(Class 8) Part 6 Continued, Part 7: Lists/Functions/Intro to Purrr</a>
      </li>
      
      <li >
        <a href="/class/09-class/">(Class 9) Part 7 continued and Part 8 . Intro to stats/`broom`/More Purrr</a>
      </li>
      
      <li >
        <a href="/class/10-class/">Part 9 (Class 10): More Stats Stuff/Summary Tables</a>
      </li>
      
      <li >
        <a href="/class/11-class/">Class 11: Finish Part 9 &#43; Part 10: Advanced Functions and Loose Ends</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

        </div>

        

        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

            <article class="article">

                <div class="docs-article-container">
                    <h1>(Class 6) Part 5 contd: Data summarizing, reshaping, and wrangling with multiple tables (contd)</h1>

                    

                    

                    
                    <div class="due-date p-2 mb-3 bg-secondary text-white">
                        Materials from class on Wednesday, February 15, 2023
                    </div>
                    

                    <div class="article-style">
                        

<div id="TOC">
<ul>
<li><a href="#r-project-files" id="toc-r-project-files">R Project files</a></li>
<li><a href="#this-years-class-video" id="toc-this-years-class-video">This year’s class video</a></li>
<li><a href="#last-years-class-video-part-5-continued-split-about-the-same" id="toc-last-years-class-video-part-5-continued-split-about-the-same">Last Year’s Class Video (Part 5 continued, split about the same)</a></li>
<li><a href="#post-class" id="toc-post-class">Post-Class</a></li>
<li><a href="#muddiest-points" id="toc-muddiest-points">Muddiest Points</a>
<ul>
<li><a href="#when-do-we-use-which-join" id="toc-when-do-we-use-which-join">When do we use which join?</a></li>
<li><a href="#separate-example" id="toc-separate-example">separate example</a></li>
<li><a href="#other-piping-troubles" id="toc-other-piping-troubles">Other: piping troubles</a></li>
</ul></li>
</ul>
</div>

<div id="r-project-files" class="section level2">
<h2>R Project files</h2>
<p>In this class we will finish the part5 material from <a href="https://bit.ly/bsta504_dropbox_2023">this folder link</a>. There are a couple updates so please download <code>part5_updated.Rmd</code> and <code>part5_haven.Rmd</code>.</p>
</div>
<div id="this-years-class-video" class="section level2">
<h2>This year’s class video</h2>
<p>See Slack for the zoom recording link (though zoom had some malfunction that failed to show the correct Rstudio screen, so last year’s video may be more helpful)</p>
</div>
<div id="last-years-class-video-part-5-continued-split-about-the-same" class="section level2">
<h2>Last Year’s Class Video (Part 5 continued, split about the same)</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/c3ZuPANIEAM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<p>View last year’s class and materials <a href="https://sph-r-programming-2022.netlify.app/class/06-class/">here</a>.</p>
</div>
<div id="post-class" class="section level1">
<h1>Post-Class</h1>
<p>Please fill out the following survey and we will discuss the results during the next lecture. All responses will be anonymous.</p>
<ul>
<li>Clearest Point: What was the most clear part of the lecture?</li>
<li>Muddiest Point: What was the most unclear part of the lecture to you?</li>
<li>Anything Else: Is there something you’d like me to know?</li>
</ul>
<p><a href="https://bit.ly/bsta504_postclass_survey" class="uri">https://bit.ly/bsta504_postclass_survey</a></p>
</div>
<div id="muddiest-points" class="section level1">
<h1>Muddiest Points</h1>
<p>Somewhat equal numbers said that pivot/joining were clear or were muddy! I think that sounds about right, though, these concepts are tricky and will take a lot of practice. Today’s class will use these methods again and I hope that will help solidify what you’ve learned.</p>
<p>I really do recommend watching the short video that I recommended last class if you’re still having trouble with grasping pivoting.</p>
<p><a href="https://youtu.be/4ZIFb1BoIB4">Dr. Kelly Bodwin’s Reshaping Data Video</a></p>
<p>For a short version, watch the <a href="https://youtu.be/4ZIFb1BoIB4?t=365">pivot_longer excerpt</a> about “working backwards” from a plot. Then watch the <a href="https://youtu.be/4ZIFb1BoIB4?t=620">pivot_wider excerpt</a></p>
<p><a href="https://stat545.com/join-cheatsheet.html">Also read this join cheatsheet</a> for some good explanations/examples about which join to use when!</p>
<p><a href="https://nyu-cdsc.github.io/learningr/assets/data-transformation.pdf">The rstudio cheatsheet is also good.</a></p>
<p>Definitely do the readings in the R for Data Science in the appropriate chapters as well! <a href="https://r4ds.had.co.nz/relational-data.html">joining</a>, <a href="https://r4ds.had.co.nz/tidy-data.html?#pivoting">pivoting</a></p>
<p>For the different join types, here are some visuals I find helpful.</p>
<p>When we use <code>bind_rows()</code> we stack cases on top of each other like so:</p>
<p><img src="/img/bind_rows_add.png" alt=""  width="70%" height="40%"/></p>
<p>For joins, we put columns next to each other based on matching keys. The “intersection” of keys is shown in these diagrams for each type of join, with the blue denoting which keys/rows we keep from which table:</p>
<p><img src="/img/dplyr_join_venn.png" alt=""  width="70%" height="70%"/></p>
<p>A more data oriented visual is shown below. The lines denote the keys that match:</p>
<p><img src="/img/joins_colors.png" alt=""  /></p>
<p>This is from the part5 Rmd:</p>
<div id="when-do-we-use-which-join" class="section level3">
<h3>When do we use which join?</h3>
<p>See this <a href="https://dplyr.tidyverse.org/articles/two-table.html">two-table verbs vignette</a> and this <a href="https://stat545.com/join-cheatsheet.html">cheatsheet</a> for some extra explanations.</p>
<p>These joins are created to match SQL joins for databases.</p>
<ul>
<li><code>inner_join</code> = You only want data that is in both tables</li>
<li><code>left_join</code> = You only want data that is in one table.
<ul>
<li>Often the right table is a subset of the left table, so it’s easy to use this to keep everything in the bigger table, and join on the smaller table</li>
<li>If the left table contains a cohort of interest, i.e. everyone that has been given a specific treatment, and you want to get their lab values from another table, use <code>left_join()</code> to add those lab values in the cohort defined by the left table</li>
</ul></li>
<li><code>right_join</code> = maybe never
<ul>
<li><code>right_join</code> does the same thing as <code>left_join</code> but backwards, I find left join easier to think about (personal preference)</li>
</ul></li>
<li><code>full_join</code> = does not remove any rows, you might want to use this as your default and filter later</li>
<li><code>anti_join</code> and <code>semi_join</code> = filtering joins, probably use rarely, use right table as an exclusion criteria and find unmatched keys between two tables (<code>anti_join</code>), or filter left table based on keys in right table (<code>semi_join</code>), and keep only columns from left table</li>
</ul>
</div>
<div id="separate-example" class="section level3">
<h3>separate example</h3>
<blockquote>
<p>separate(), needed a few more minutes to get it figured out</p>
</blockquote>
<p>Let’s do another short example!</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
## ✔ dplyr     1.1.0     ✔ readr     2.1.4
## ✔ forcats   1.0.0     ✔ stringr   1.5.0
## ✔ ggplot2   3.4.1     ✔ tibble    3.1.8
## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
## ✔ purrr     1.0.1     
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the ]8;;http://conflicted.r-lib.org/conflicted package]8;; to force all conflicts to become errors</code></pre>
<pre class="r"><code>mydata &lt;- tibble(
  name = c(&quot;Doe, Jane&quot;, &quot;Smith, M&quot;, &quot;Lee, Dave&quot;),
  rx = c(&quot;Advil; 4.5 mg&quot;, &quot;Tylenol; 300mg&quot;, &quot;Advil; 2.5 mg&quot;)
)

# obviously the dosage makes no sense, but, for sake of example
mydata</code></pre>
<pre><code>## # A tibble: 3 × 2
##   name      rx            
##   &lt;chr&gt;     &lt;chr&gt;         
## 1 Doe, Jane Advil; 4.5 mg 
## 2 Smith, M  Tylenol; 300mg
## 3 Lee, Dave Advil; 2.5 mg</code></pre>
<pre class="r"><code># prints a little prettier in html
knitr::kable(mydata)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">rx</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Doe, Jane</td>
<td align="left">Advil; 4.5 mg</td>
</tr>
<tr class="even">
<td align="left">Smith, M</td>
<td align="left">Tylenol; 300mg</td>
</tr>
<tr class="odd">
<td align="left">Lee, Dave</td>
<td align="left">Advil; 2.5 mg</td>
</tr>
</tbody>
</table>
<pre class="r"><code># by default, separates using most special/non-alphanumeric characters
mydata %&gt;%
  separate(name, into = c(&quot;last_name&quot;, &quot;first_name&quot;))</code></pre>
<pre><code>## # A tibble: 3 × 3
##   last_name first_name rx            
##   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;         
## 1 Doe       Jane       Advil; 4.5 mg 
## 2 Smith     M          Tylenol; 300mg
## 3 Lee       Dave       Advil; 2.5 mg</code></pre>
<pre class="r"><code># since there are special characters in rx, will need to be more specific
# note it tried to split on the . since we only have 2 columns named, it removed the rest
mydata %&gt;%
  separate(rx, into = c(&quot;rx_name&quot;, &quot;rx_dose&quot;))</code></pre>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 2 rows [1, 3].</code></pre>
<pre><code>## # A tibble: 3 × 3
##   name      rx_name rx_dose
##   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  
## 1 Doe, Jane Advil   4      
## 2 Smith, M  Tylenol 300mg  
## 3 Lee, Dave Advil   2</code></pre>
<pre class="r"><code># if we add in some more columns, we can see it&#39;s splitting based on ; . and space!
mydata %&gt;%
  separate(rx, into = c(&quot;rx_name&quot;, &quot;rx_dose&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;))</code></pre>
<pre><code>## Warning: Expected 5 pieces. Missing pieces filled with `NA` in 3 rows [1, 2,
## 3].</code></pre>
<pre><code>## # A tibble: 3 × 6
##   name      rx_name rx_dose a     b     c    
##   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
## 1 Doe, Jane Advil   4       5     mg    &lt;NA&gt; 
## 2 Smith, M  Tylenol 300mg   &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
## 3 Lee, Dave Advil   2       5     mg    &lt;NA&gt;</code></pre>
<pre class="r"><code># still have a space
mydata %&gt;%
  separate(rx, into = c(&quot;rx_name&quot;, &quot;rx_dose&quot;), sep=&quot;;&quot;)</code></pre>
<pre><code>## # A tibble: 3 × 3
##   name      rx_name rx_dose  
##   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;    
## 1 Doe, Jane Advil   &quot; 4.5 mg&quot;
## 2 Smith, M  Tylenol &quot; 300mg&quot; 
## 3 Lee, Dave Advil   &quot; 2.5 mg&quot;</code></pre>
<pre class="r"><code># removed the space
mydata %&gt;%
  separate(rx, into = c(&quot;rx_name&quot;, &quot;rx_dose&quot;), sep=&quot;; &quot;)</code></pre>
<pre><code>## # A tibble: 3 × 3
##   name      rx_name rx_dose
##   &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;  
## 1 Doe, Jane Advil   4.5 mg 
## 2 Smith, M  Tylenol 300mg  
## 3 Lee, Dave Advil   2.5 mg</code></pre>
<pre class="r"><code># removed the space, let&#39;s also remove the mg
mydata %&gt;%
  separate(rx, into = c(&quot;rx_name&quot;, &quot;rx_dose_mg&quot;), sep=&quot;; &quot;) %&gt;%
  mutate(rx_dose_mg = str_remove_all(rx_dose_mg, &quot;mg&quot;),
         rx_dose_mg = as.numeric(rx_dose_mg))</code></pre>
<pre><code>## # A tibble: 3 × 3
##   name      rx_name rx_dose_mg
##   &lt;chr&gt;     &lt;chr&gt;        &lt;dbl&gt;
## 1 Doe, Jane Advil          4.5
## 2 Smith, M  Tylenol      300  
## 3 Lee, Dave Advil          2.5</code></pre>
<pre class="r"><code># all together, and also leave the name column in
mydata %&gt;%
  separate(name, into = c(&quot;last_name&quot;, &quot;first_name&quot;), remove = FALSE) %&gt;%
  separate(rx, into = c(&quot;rx_name&quot;, &quot;rx_dose_mg&quot;), sep=&quot;; &quot;) %&gt;%
  mutate(rx_dose_mg = str_remove_all(rx_dose_mg, &quot;mg&quot;),
         rx_dose_mg = as.numeric(rx_dose_mg))</code></pre>
<pre><code>## # A tibble: 3 × 5
##   name      last_name first_name rx_name rx_dose_mg
##   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;        &lt;dbl&gt;
## 1 Doe, Jane Doe       Jane       Advil          4.5
## 2 Smith, M  Smith     M          Tylenol      300  
## 3 Lee, Dave Lee       Dave       Advil          2.5</code></pre>
</div>
<div id="other-piping-troubles" class="section level2">
<h2>Other: piping troubles</h2>
<blockquote>
<p>I have issues with my pipes where I think I’m putting things in the wrong order and nothing happens- I don’t get errors I can google, it just doesn’t work. Most often it’s when I end a pipe with %&gt;% tabyl(variable), maybe that is a no-no? But I’ve found I end up having to break pipes into multiple pieces because I can’t string them together the right way.</p>
</blockquote>
<blockquote>
<pre><code>I have a hard time understanding when to pipe things together or knowing when to nest a function as well. I&#39;m glad you&#39;ve reassured us in class that it&#39;s ok that we put our functions into pieces. I think that eases the stress with learning as I feel like trying to make everything happen in one command can be very overwhelming.</code></pre>
</blockquote>
<p>Yes, yes! Please separate out your pipes/commands if it makes things more clear or makes it work better for you!</p>
<p>I’m not sure what’s happening with the no-errors-broken situation. I will say that I often separate the <code>taybl(variable)</code> code when I’m doing analysis work, just because I am saving intermediate data sets after data cleaning or sub-setting and don’t want to save that tabyl. Something like this:</p>
<pre class="r"><code>library(janitor)</code></pre>
<pre><code>## 
## Attaching package: &#39;janitor&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<pre class="r"><code>mtcars6 &lt;- mtcars %&gt;% filter(cyl==6)
# check that it worked
mtcars6 %&gt;% tabyl(cyl)</code></pre>
<pre><code>##  cyl n percent
##    6 7       1</code></pre>
<p>As a beginner I definitely think doing each step individually and seeing the result and (saving it/assigning it appropriately!) is the way to learn what each function does. I tend to string things together because I am used to doing that, but I’ll try not to do that so much if it’s adding confusion.</p>
</div>
</div>

                    </div>

                    



                    
                </div>

                <div class="body-footer">
                    <p>Last updated on February 28, 2023</p>

                    





  
  

<p class="edit-page">
  <a href="https://github.com/jminnier/sph_r_programming_site/edit/master/content/class/06-class.html">
    <i class="fas fa-pen pr-2"></i>Edit this page
  </a>
</p>




                    

                </div>

            </article>

            <footer>
    <hr>

    <div class="row course-info">
        <div class="col-md-7">
            <p>
                <strong>BSTA 504: R Programming 2023 (Winter 2023)</strong><br>

                <a href="https://www.ohsu.edu" target="_blank" rel="noopener">Oregon Health &amp; Science University / Portland State University</a> &emsp;&emsp;
                <a href="https://ohsu-psu-sph.org/" target="_blank" rel="noopener">OHSU/PSU School of Public Health</a>
            </p>

            <p>
                <a href="http://jessicaminnier.com" target="_blank" rel="noopener"><i class="fas fa-user"></i>
                    Dr. Jessica Minnier</a> &emsp;&emsp;
                <a href="mailto:minnier@ohsu.edu"><i class="fas fa-envelope"></i>
                    minnier@ohsu.edu</a>
            </p>

            <p>
                <i class="far fa-calendar-alt"></i> Wednesdays &emsp;&emsp;
                <i class="far fa-clock"></i> 3:15–6:05 PM <br>
                <i class="fas fa-university"></i> See Sakai
            </p>
        </div>

        <div class="col-md-5 credits">
            <p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
            
            <p>Content <i class="fab fa-creative-commons"></i> 2023 <a href="http://jessicaminnier.com" target="_blank" rel="noopener">ted &amp; jessica</a></p>
        
            <p>This site created with the <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> adapted by <a href="https://github.com/laderast/sph_r_programming_site" target="_blank" rel="noopener">Ted Laderas</a> and <a href="https://github.com/andrewheiss/evalsp20.classes.andrewheiss.com" target="_blank" rel="noopener">Andrew Heiss</a> in <a href="https://bookdown.org/yihui/blogdown/" target="_blank" rel="noopener">blogdown</a> and <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>. </p>
            
            <p><a href="https://github.com/jminnier/sph_r_programming_site" target="_blank" rel="noopener"><i class="fab fa-github"></i> View the source at GitHub.</a></p>
        </div>
    </div>
</footer>


        </main>
    </div>
</div>

        

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.a1c3596268a997890f5b9089b30365c6.js"></script>

    






    
    

    
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>

</html>
